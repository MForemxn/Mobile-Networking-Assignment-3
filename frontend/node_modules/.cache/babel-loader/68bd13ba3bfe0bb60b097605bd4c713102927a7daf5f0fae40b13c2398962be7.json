{"ast":null,"code":"var _jsxFileName = \"/Users/masonforeman/Library/Mobile Documents/com~apple~CloudDocs/University/Year 2/Spring/Mobile Networking/Assignments/Assignment 3/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './index.css';\nimport websocketService from './services/websocketService';\nimport LoginPage from './LoginPage';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst VEHICLE_TYPES = {\n  regular_car: {\n    name: 'Car',\n    color: 'regular',\n    width: 40,\n    height: 20\n  },\n  truck: {\n    name: 'Truck',\n    color: 'truck',\n    width: 50,\n    height: 20\n  },\n  motorcycle: {\n    name: 'Motorcycle',\n    color: 'motorcycle',\n    width: 30,\n    height: 15\n  },\n  emergency_vehicle: {\n    name: 'Emergency',\n    color: 'emergency',\n    width: 40,\n    height: 20\n  }\n};\nconst LANES = {\n  1: {\n    name: 'Left Lane',\n    y: 0\n  },\n  2: {\n    name: 'Middle Lane',\n    y: 50\n  },\n  3: {\n    name: 'Right Lane',\n    y: 100\n  }\n};\nfunction App() {\n  _s();\n  var _VEHICLE_TYPES$vehicl3, _LANES$myLane;\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [userName, setUserName] = useState('');\n  const [userColor, setUserColor] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [deviceId, setDeviceId] = useState(null);\n  const [vehicleType, setVehicleType] = useState(null);\n  const [isEmergencyVehicle, setIsEmergencyVehicle] = useState(false);\n  const [emergencyActive, setEmergencyActive] = useState(false);\n  const [vehicles, setVehicles] = useState({});\n  const [connectionError, setConnectionError] = useState(null);\n  const [laneChanges, setLaneChanges] = useState({});\n  const [controlLocked, setControlLocked] = useState(false); // Emergency takeover\n  const [myLane, setMyLane] = useState(2); // Student's current lane\n\n  // Handle login\n  const handleLogin = (code, name) => {\n    const color = generateRandomColor();\n    setUserName(name);\n    setUserColor(color);\n    setIsLoggedIn(true);\n\n    // Determine role from URL (?admin=1)\n    const params = new URLSearchParams(window.location.search);\n    const role = params.get('admin') ? 'admin' : 'student';\n    // Connect to WebSocket with name/color/role\n    websocketService.connect(name, color, role);\n  };\n\n  // Generate random car color\n  const generateRandomColor = () => {\n    const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E9', '#F8C471', '#82E0AA', '#F1948A', '#85C1E9', '#D7BDE2'];\n    return colors[Math.floor(Math.random() * colors.length)];\n  };\n\n  // Handle WebSocket messages\n  const handleWebSocketMessage = useCallback(data => {\n    var _data$emergency_statu;\n    switch (data.type) {\n      case 'welcome':\n        setDeviceId(data.device_id);\n        setVehicleType(data.vehicle_type);\n        setIsEmergencyVehicle(data.vehicle_type === 'emergency_vehicle');\n        break;\n      case 'system_state':\n        setVehicles(data.devices || {});\n        if ((_data$emergency_statu = data.emergency_status) !== null && _data$emergency_statu !== void 0 && _data$emergency_statu.active_emergency_device) {\n          setEmergencyActive(true);\n        }\n        break;\n      case 'position_update':\n        setVehicles(prev => ({\n          ...prev,\n          [data.device_id]: {\n            ...prev[data.device_id],\n            ...data.position\n          }\n        }));\n        break;\n      case 'lane_change':\n        // Handle lane change animation\n        setLaneChanges(prev => ({\n          ...prev,\n          [data.device_id]: {\n            fromLane: data.old_lane,\n            toLane: data.new_lane,\n            reason: data.reason,\n            timestamp: Date.now()\n          }\n        }));\n\n        // Update vehicle lane after animation\n        setTimeout(() => {\n          setVehicles(prev => ({\n            ...prev,\n            [data.device_id]: {\n              ...prev[data.device_id],\n              current_lane: data.new_lane\n            }\n          }));\n          setLaneChanges(prev => {\n            const updated = {\n              ...prev\n            };\n            delete updated[data.device_id];\n            return updated;\n          });\n        }, 2000);\n        break;\n      case 'emergency_signal':\n      case 'emergency_takeover':\n        setEmergencyActive(true);\n        if (data.takeover) {\n          setControlLocked(true);\n          console.log('üö® EMERGENCY TAKEOVER - Control locked!', data.message);\n          // Auto-move to right lane during takeover\n          setMyLane(3);\n        } else {\n          console.log('Emergency signal received:', data.message);\n        }\n        break;\n      case 'emergency_cleared':\n        setEmergencyActive(false);\n        setControlLocked(false);\n        console.log('üü¢ Emergency cleared - Control restored');\n        break;\n      default:\n        console.log('Unhandled message type:', data.type);\n    }\n  }, []);\n\n  // Initialize WebSocket connection and event listeners\n  useEffect(() => {\n    // Set up event listeners\n    const handleConnected = () => {\n      setIsConnected(true);\n      setConnectionError(null);\n    };\n    const handleDisconnected = event => {\n      setIsConnected(false);\n      if (event.code !== 1000) {\n        setConnectionError('Connection lost. Retrying...');\n      }\n    };\n    const handleError = error => {\n      setConnectionError('Connection error');\n      console.error('WebSocket error:', error);\n    };\n    const handleMaxReconnectAttemptsReached = () => {\n      setConnectionError('Failed to connect to server. Please refresh the page.');\n    };\n\n    // Add event listeners\n    websocketService.addEventListener('connected', handleConnected);\n    websocketService.addEventListener('disconnected', handleDisconnected);\n    websocketService.addEventListener('error', handleError);\n    websocketService.addEventListener('maxReconnectAttemptsReached', handleMaxReconnectAttemptsReached);\n    websocketService.addEventListener('welcome', handleWebSocketMessage);\n    websocketService.addEventListener('systemState', handleWebSocketMessage);\n    websocketService.addEventListener('positionUpdate', handleWebSocketMessage);\n    websocketService.addEventListener('laneChange', handleWebSocketMessage);\n    websocketService.addEventListener('emergencySignal', handleWebSocketMessage);\n    websocketService.addEventListener('emergencyCleared', handleWebSocketMessage);\n\n    // Initialize connection only after login\n    if (isLoggedIn) {\n      if (websocketService.isConnected) {\n        setIsConnected(true);\n      }\n    }\n\n    // Cleanup function\n    return () => {\n      websocketService.removeEventListener('connected', handleConnected);\n      websocketService.removeEventListener('disconnected', handleDisconnected);\n      websocketService.removeEventListener('error', handleError);\n      websocketService.removeEventListener('maxReconnectAttemptsReached', handleMaxReconnectAttemptsReached);\n      websocketService.removeEventListener('welcome', handleWebSocketMessage);\n      websocketService.removeEventListener('systemState', handleWebSocketMessage);\n      websocketService.removeEventListener('positionUpdate', handleWebSocketMessage);\n      websocketService.removeEventListener('laneChange', handleWebSocketMessage);\n      websocketService.removeEventListener('emergencySignal', handleWebSocketMessage);\n      websocketService.removeEventListener('emergencyCleared', handleWebSocketMessage);\n    };\n  }, [handleWebSocketMessage, isLoggedIn]);\n\n  // Send emergency signal\n  const sendEmergencySignal = () => {\n    if (isConnected && isEmergencyVehicle) {\n      websocketService.sendEmergencySignal();\n      setEmergencyActive(true);\n    }\n  };\n\n  // Clear emergency signal\n  const clearEmergencySignal = () => {\n    if (isConnected && isEmergencyVehicle) {\n      websocketService.clearEmergencySignal();\n      setEmergencyActive(false);\n    }\n  };\n\n  // Send position update\n  const sendPositionUpdate = position => {\n    if (isConnected && deviceId) {\n      websocketService.sendPositionUpdate(position);\n    }\n  };\n\n  // Change lane (student control)\n  const changeLane = newLane => {\n    if (isConnected && !controlLocked && newLane !== myLane) {\n      setMyLane(newLane);\n      websocketService.sendLaneChange(newLane, 'manual');\n      console.log(`Changed to lane ${newLane}`);\n    }\n  };\n\n  // Get vehicle style based on type and state\n  const getVehicleStyle = vehicle => {\n    var _VEHICLE_TYPES$vehicl, _VEHICLE_TYPES$vehicl2;\n    const baseStyle = {\n      left: `${vehicle.position_x || 0}px`,\n      top: `${(vehicle.current_lane - 1) * 50 + 10}px`,\n      width: `${((_VEHICLE_TYPES$vehicl = VEHICLE_TYPES[vehicle.vehicle_type]) === null || _VEHICLE_TYPES$vehicl === void 0 ? void 0 : _VEHICLE_TYPES$vehicl.width) || 40}px`,\n      height: `${((_VEHICLE_TYPES$vehicl2 = VEHICLE_TYPES[vehicle.vehicle_type]) === null || _VEHICLE_TYPES$vehicl2 === void 0 ? void 0 : _VEHICLE_TYPES$vehicl2.height) || 20}px`\n    };\n\n    // Add lane changing animation\n    if (laneChanges[vehicle.device_id]) {\n      const change = laneChanges[vehicle.device_id];\n      const progress = Math.min((Date.now() - change.timestamp) / 2000, 1);\n      const startY = (change.fromLane - 1) * 50 + 10;\n      const endY = (change.toLane - 1) * 50 + 10;\n      const currentY = startY + (endY - startY) * progress;\n      return {\n        ...baseStyle,\n        top: `${currentY}px`,\n        transform: `scale(${0.8 + progress * 0.2})`\n      };\n    }\n    return baseStyle;\n  };\n  const totalVehicles = Object.keys(vehicles).length;\n  const emergencyVehicles = Object.values(vehicles).filter(v => v.is_emergency_active).length;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [!isLoggedIn && /*#__PURE__*/_jsxDEV(LoginPage, {\n      onJoin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"connection-status\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `status-dot ${isConnected ? 'connected' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: isConnected ? 'Connected' : 'Disconnected'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vehicle-counter\",\n        children: [\"Vehicles: \", totalVehicles, \" | Emergency: \", emergencyVehicles]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Vehicle Control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `device-info ${isConnected ? 'connected' : 'disconnected'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `status-badge ${isConnected ? 'connected' : 'disconnected'}`,\n            children: isConnected ? 'Connected' : 'Disconnected'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Device ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 16\n            }, this), \" \", deviceId || 'Not assigned']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Vehicle:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 16\n            }, this), \" \", vehicleType ? (_VEHICLE_TYPES$vehicl3 = VEHICLE_TYPES[vehicleType]) === null || _VEHICLE_TYPES$vehicl3 === void 0 ? void 0 : _VEHICLE_TYPES$vehicl3.name : 'Unknown']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 9\n        }, this), !isEmergencyVehicle && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lane-controls\",\n          style: {\n            marginTop: '15px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              marginBottom: '10px'\n            },\n            children: controlLocked ? 'üîí Control Locked (Emergency)' : 'üöó Drive Your Vehicle'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '10px',\n              justifyContent: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => changeLane(1),\n              disabled: !isConnected || controlLocked || myLane === 1,\n              style: {\n                padding: '10px 20px',\n                fontSize: '14px',\n                cursor: controlLocked || myLane === 1 ? 'not-allowed' : 'pointer',\n                opacity: controlLocked || myLane === 1 ? 0.5 : 1\n              },\n              children: \"\\u2B05\\uFE0F Left Lane\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => changeLane(2),\n              disabled: !isConnected || controlLocked || myLane === 2,\n              style: {\n                padding: '10px 20px',\n                fontSize: '14px',\n                cursor: controlLocked || myLane === 2 ? 'not-allowed' : 'pointer',\n                opacity: controlLocked || myLane === 2 ? 0.5 : 1\n              },\n              children: \"\\u2B06\\uFE0F Middle Lane\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => changeLane(3),\n              disabled: !isConnected || controlLocked || myLane === 3,\n              style: {\n                padding: '10px 20px',\n                fontSize: '14px',\n                cursor: controlLocked || myLane === 3 ? 'not-allowed' : 'pointer',\n                opacity: controlLocked || myLane === 3 ? 0.5 : 1\n              },\n              children: \"\\u27A1\\uFE0F Right Lane\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '10px',\n              fontSize: '12px',\n              color: '#666'\n            },\n            children: [\"Current Lane: \", ((_LANES$myLane = LANES[myLane]) === null || _LANES$myLane === void 0 ? void 0 : _LANES$myLane.name) || 'Unknown']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), isEmergencyVehicle && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"emergency-controls\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `emergency-button ${emergencyActive ? 'emergency-active' : ''}`,\n            onClick: emergencyActive ? clearEmergencySignal : sendEmergencySignal,\n            disabled: !isConnected,\n            children: emergencyActive ? 'üõë Clear Emergency' : 'üö® Activate Emergency'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), connectionError && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#dc3545',\n            fontSize: '12px',\n            marginTop: '10px'\n          },\n          children: connectionError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"highway-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"highway\",\n          children: [Object.entries(LANES).map(([laneNum, lane]) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lane\",\n            style: {\n              width: `${100 / Object.keys(LANES).length}%`,\n              left: `${(laneNum - 1) / Object.keys(LANES).length * 100}%`\n            }\n          }, laneNum, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this)), Object.entries(vehicles).map(([id, vehicle]) => {\n            var _VEHICLE_TYPES$vehicl4, _VEHICLE_TYPES$vehicl5, _VEHICLE_TYPES$vehicl6;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `vehicle ${((_VEHICLE_TYPES$vehicl4 = VEHICLE_TYPES[vehicle.vehicle_type]) === null || _VEHICLE_TYPES$vehicl4 === void 0 ? void 0 : _VEHICLE_TYPES$vehicl4.color) || 'regular'} ${laneChanges[id] ? 'lane-changing' : ''}`,\n              style: getVehicleStyle(vehicle),\n              title: `${(_VEHICLE_TYPES$vehicl5 = VEHICLE_TYPES[vehicle.vehicle_type]) === null || _VEHICLE_TYPES$vehicl5 === void 0 ? void 0 : _VEHICLE_TYPES$vehicl5.name} (${id.substring(0, 8)})`,\n              children: (_VEHICLE_TYPES$vehicl6 = VEHICLE_TYPES[vehicle.vehicle_type]) === null || _VEHICLE_TYPES$vehicl6 === void 0 ? void 0 : _VEHICLE_TYPES$vehicl6.name.substring(0, 2)\n            }, id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 13\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 7\n      }, this), !isConnected && !connectionError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Connecting to server...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), connectionError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Connection Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: connectionError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          style: {\n            marginTop: '10px'\n          },\n          children: \"Retry Connection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"j8Yll88z7D6LVJACyc8Cm4u92S4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","websocketService","LoginPage","jsxDEV","_jsxDEV","Fragment","_Fragment","VEHICLE_TYPES","regular_car","name","color","width","height","truck","motorcycle","emergency_vehicle","LANES","y","App","_s","_VEHICLE_TYPES$vehicl3","_LANES$myLane","isLoggedIn","setIsLoggedIn","userName","setUserName","userColor","setUserColor","isConnected","setIsConnected","deviceId","setDeviceId","vehicleType","setVehicleType","isEmergencyVehicle","setIsEmergencyVehicle","emergencyActive","setEmergencyActive","vehicles","setVehicles","connectionError","setConnectionError","laneChanges","setLaneChanges","controlLocked","setControlLocked","myLane","setMyLane","handleLogin","code","generateRandomColor","params","URLSearchParams","window","location","search","role","get","connect","colors","Math","floor","random","length","handleWebSocketMessage","data","_data$emergency_statu","type","device_id","vehicle_type","devices","emergency_status","active_emergency_device","prev","position","fromLane","old_lane","toLane","new_lane","reason","timestamp","Date","now","setTimeout","current_lane","updated","takeover","console","log","message","handleConnected","handleDisconnected","event","handleError","error","handleMaxReconnectAttemptsReached","addEventListener","removeEventListener","sendEmergencySignal","clearEmergencySignal","sendPositionUpdate","changeLane","newLane","sendLaneChange","getVehicleStyle","vehicle","_VEHICLE_TYPES$vehicl","_VEHICLE_TYPES$vehicl2","baseStyle","left","position_x","top","change","progress","min","startY","endY","currentY","transform","totalVehicles","Object","keys","emergencyVehicles","values","filter","v","is_emergency_active","className","children","onJoin","fileName","_jsxFileName","lineNumber","columnNumber","style","marginTop","marginBottom","display","gap","justifyContent","onClick","disabled","padding","fontSize","cursor","opacity","entries","map","laneNum","lane","id","_VEHICLE_TYPES$vehicl4","_VEHICLE_TYPES$vehicl5","_VEHICLE_TYPES$vehicl6","title","substring","reload","_c","$RefreshReg$"],"sources":["/Users/masonforeman/Library/Mobile Documents/com~apple~CloudDocs/University/Year 2/Spring/Mobile Networking/Assignments/Assignment 3/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './index.css';\nimport websocketService from './services/websocketService';\nimport LoginPage from './LoginPage';\n\nconst VEHICLE_TYPES = {\n  regular_car: { name: 'Car', color: 'regular', width: 40, height: 20 },\n  truck: { name: 'Truck', color: 'truck', width: 50, height: 20 },\n  motorcycle: { name: 'Motorcycle', color: 'motorcycle', width: 30, height: 15 },\n  emergency_vehicle: { name: 'Emergency', color: 'emergency', width: 40, height: 20 }\n};\n\nconst LANES = {\n  1: { name: 'Left Lane', y: 0 },\n  2: { name: 'Middle Lane', y: 50 },\n  3: { name: 'Right Lane', y: 100 }\n};\n\nfunction App() {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [userName, setUserName] = useState('');\n  const [userColor, setUserColor] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [deviceId, setDeviceId] = useState(null);\n  const [vehicleType, setVehicleType] = useState(null);\n  const [isEmergencyVehicle, setIsEmergencyVehicle] = useState(false);\n  const [emergencyActive, setEmergencyActive] = useState(false);\n  const [vehicles, setVehicles] = useState({});\n  const [connectionError, setConnectionError] = useState(null);\n  const [laneChanges, setLaneChanges] = useState({});\n  const [controlLocked, setControlLocked] = useState(false);  // Emergency takeover\n  const [myLane, setMyLane] = useState(2);  // Student's current lane\n\n  // Handle login\n  const handleLogin = (code, name) => {\n    const color = generateRandomColor();\n    setUserName(name);\n    setUserColor(color);\n    setIsLoggedIn(true);\n    \n    // Determine role from URL (?admin=1)\n    const params = new URLSearchParams(window.location.search);\n    const role = params.get('admin') ? 'admin' : 'student';\n    // Connect to WebSocket with name/color/role\n    websocketService.connect(name, color, role);\n  };\n\n  // Generate random car color\n  const generateRandomColor = () => {\n    const colors = [\n      '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7',\n      '#DDA0DD', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E9',\n      '#F8C471', '#82E0AA', '#F1948A', '#85C1E9', '#D7BDE2'\n    ];\n    return colors[Math.floor(Math.random() * colors.length)];\n  };\n\n  // Handle WebSocket messages\n  const handleWebSocketMessage = useCallback((data) => {\n    switch (data.type) {\n      case 'welcome':\n        setDeviceId(data.device_id);\n        setVehicleType(data.vehicle_type);\n        setIsEmergencyVehicle(data.vehicle_type === 'emergency_vehicle');\n        break;\n\n      case 'system_state':\n        setVehicles(data.devices || {});\n        if (data.emergency_status?.active_emergency_device) {\n          setEmergencyActive(true);\n        }\n        break;\n\n      case 'position_update':\n        setVehicles(prev => ({\n          ...prev,\n          [data.device_id]: {\n            ...prev[data.device_id],\n            ...data.position\n          }\n        }));\n        break;\n\n      case 'lane_change':\n        // Handle lane change animation\n        setLaneChanges(prev => ({\n          ...prev,\n          [data.device_id]: {\n            fromLane: data.old_lane,\n            toLane: data.new_lane,\n            reason: data.reason,\n            timestamp: Date.now()\n          }\n        }));\n\n        // Update vehicle lane after animation\n        setTimeout(() => {\n          setVehicles(prev => ({\n            ...prev,\n            [data.device_id]: {\n              ...prev[data.device_id],\n              current_lane: data.new_lane\n            }\n          }));\n          setLaneChanges(prev => {\n            const updated = { ...prev };\n            delete updated[data.device_id];\n            return updated;\n          });\n        }, 2000);\n        break;\n\n      case 'emergency_signal':\n      case 'emergency_takeover':\n        setEmergencyActive(true);\n        if (data.takeover) {\n          setControlLocked(true);\n          console.log('üö® EMERGENCY TAKEOVER - Control locked!', data.message);\n          // Auto-move to right lane during takeover\n          setMyLane(3);\n        } else {\n          console.log('Emergency signal received:', data.message);\n        }\n        break;\n\n      case 'emergency_cleared':\n        setEmergencyActive(false);\n        setControlLocked(false);\n        console.log('üü¢ Emergency cleared - Control restored');\n        break;\n\n      default:\n        console.log('Unhandled message type:', data.type);\n    }\n  }, []);\n\n  // Initialize WebSocket connection and event listeners\n  useEffect(() => {\n    // Set up event listeners\n    const handleConnected = () => {\n      setIsConnected(true);\n      setConnectionError(null);\n    };\n\n    const handleDisconnected = (event) => {\n      setIsConnected(false);\n      if (event.code !== 1000) {\n        setConnectionError('Connection lost. Retrying...');\n      }\n    };\n\n    const handleError = (error) => {\n      setConnectionError('Connection error');\n      console.error('WebSocket error:', error);\n    };\n\n    const handleMaxReconnectAttemptsReached = () => {\n      setConnectionError('Failed to connect to server. Please refresh the page.');\n    };\n\n    // Add event listeners\n    websocketService.addEventListener('connected', handleConnected);\n    websocketService.addEventListener('disconnected', handleDisconnected);\n    websocketService.addEventListener('error', handleError);\n    websocketService.addEventListener('maxReconnectAttemptsReached', handleMaxReconnectAttemptsReached);\n    websocketService.addEventListener('welcome', handleWebSocketMessage);\n    websocketService.addEventListener('systemState', handleWebSocketMessage);\n    websocketService.addEventListener('positionUpdate', handleWebSocketMessage);\n    websocketService.addEventListener('laneChange', handleWebSocketMessage);\n    websocketService.addEventListener('emergencySignal', handleWebSocketMessage);\n    websocketService.addEventListener('emergencyCleared', handleWebSocketMessage);\n\n    // Initialize connection only after login\n    if (isLoggedIn) {\n      if (websocketService.isConnected) {\n        setIsConnected(true);\n      }\n    }\n\n    // Cleanup function\n    return () => {\n      websocketService.removeEventListener('connected', handleConnected);\n      websocketService.removeEventListener('disconnected', handleDisconnected);\n      websocketService.removeEventListener('error', handleError);\n      websocketService.removeEventListener('maxReconnectAttemptsReached', handleMaxReconnectAttemptsReached);\n      websocketService.removeEventListener('welcome', handleWebSocketMessage);\n      websocketService.removeEventListener('systemState', handleWebSocketMessage);\n      websocketService.removeEventListener('positionUpdate', handleWebSocketMessage);\n      websocketService.removeEventListener('laneChange', handleWebSocketMessage);\n      websocketService.removeEventListener('emergencySignal', handleWebSocketMessage);\n      websocketService.removeEventListener('emergencyCleared', handleWebSocketMessage);\n    };\n  }, [handleWebSocketMessage, isLoggedIn]);\n\n  // Send emergency signal\n  const sendEmergencySignal = () => {\n    if (isConnected && isEmergencyVehicle) {\n      websocketService.sendEmergencySignal();\n      setEmergencyActive(true);\n    }\n  };\n\n  // Clear emergency signal\n  const clearEmergencySignal = () => {\n    if (isConnected && isEmergencyVehicle) {\n      websocketService.clearEmergencySignal();\n      setEmergencyActive(false);\n    }\n  };\n\n  // Send position update\n  const sendPositionUpdate = (position) => {\n    if (isConnected && deviceId) {\n      websocketService.sendPositionUpdate(position);\n    }\n  };\n\n  // Change lane (student control)\n  const changeLane = (newLane) => {\n    if (isConnected && !controlLocked && newLane !== myLane) {\n      setMyLane(newLane);\n      websocketService.sendLaneChange(newLane, 'manual');\n      console.log(`Changed to lane ${newLane}`);\n    }\n  };\n\n  // Get vehicle style based on type and state\n  const getVehicleStyle = (vehicle) => {\n    const baseStyle = {\n      left: `${vehicle.position_x || 0}px`,\n      top: `${(vehicle.current_lane - 1) * 50 + 10}px`,\n      width: `${VEHICLE_TYPES[vehicle.vehicle_type]?.width || 40}px`,\n      height: `${VEHICLE_TYPES[vehicle.vehicle_type]?.height || 20}px`,\n    };\n\n    // Add lane changing animation\n    if (laneChanges[vehicle.device_id]) {\n      const change = laneChanges[vehicle.device_id];\n      const progress = Math.min((Date.now() - change.timestamp) / 2000, 1);\n      const startY = (change.fromLane - 1) * 50 + 10;\n      const endY = (change.toLane - 1) * 50 + 10;\n      const currentY = startY + (endY - startY) * progress;\n\n      return {\n        ...baseStyle,\n        top: `${currentY}px`,\n        transform: `scale(${0.8 + progress * 0.2})`,\n      };\n    }\n\n    return baseStyle;\n  };\n\n  const totalVehicles = Object.keys(vehicles).length;\n  const emergencyVehicles = Object.values(vehicles).filter(v => v.is_emergency_active).length;\n\n  return (\n    <div className=\"App\">\n      {!isLoggedIn && (\n        <LoginPage onJoin={handleLogin} />\n      )}\n      {isLoggedIn && (\n      <>\n      {/* Connection Status */}\n      <div className=\"connection-status\">\n        <div className={`status-dot ${isConnected ? 'connected' : ''}`} />\n        <span>{isConnected ? 'Connected' : 'Disconnected'}</span>\n      </div>\n\n      {/* Vehicle Counter */}\n      <div className=\"vehicle-counter\">\n        Vehicles: {totalVehicles} | Emergency: {emergencyVehicles}\n      </div>\n\n      {/* Control Panel */}\n      <div className=\"control-panel\">\n        <h3>Vehicle Control</h3>\n\n        <div className={`device-info ${isConnected ? 'connected' : 'disconnected'}`}>\n          <div className={`status-badge ${isConnected ? 'connected' : 'disconnected'}`}>\n            {isConnected ? 'Connected' : 'Disconnected'}\n          </div>\n          <div><strong>Device ID:</strong> {deviceId || 'Not assigned'}</div>\n          <div><strong>Vehicle:</strong> {vehicleType ? VEHICLE_TYPES[vehicleType]?.name : 'Unknown'}</div>\n        </div>\n\n        {/* Lane Control Buttons - for students to drive */}\n        {!isEmergencyVehicle && (\n          <div className=\"lane-controls\" style={{ marginTop: '15px' }}>\n            <h4 style={{ marginBottom: '10px' }}>\n              {controlLocked ? 'üîí Control Locked (Emergency)' : 'üöó Drive Your Vehicle'}\n            </h4>\n            <div style={{ display: 'flex', gap: '10px', justifyContent: 'center' }}>\n              <button\n                onClick={() => changeLane(1)}\n                disabled={!isConnected || controlLocked || myLane === 1}\n                style={{\n                  padding: '10px 20px',\n                  fontSize: '14px',\n                  cursor: (controlLocked || myLane === 1) ? 'not-allowed' : 'pointer',\n                  opacity: (controlLocked || myLane === 1) ? 0.5 : 1\n                }}\n              >\n                ‚¨ÖÔ∏è Left Lane\n              </button>\n              <button\n                onClick={() => changeLane(2)}\n                disabled={!isConnected || controlLocked || myLane === 2}\n                style={{\n                  padding: '10px 20px',\n                  fontSize: '14px',\n                  cursor: (controlLocked || myLane === 2) ? 'not-allowed' : 'pointer',\n                  opacity: (controlLocked || myLane === 2) ? 0.5 : 1\n                }}\n              >\n                ‚¨ÜÔ∏è Middle Lane\n              </button>\n              <button\n                onClick={() => changeLane(3)}\n                disabled={!isConnected || controlLocked || myLane === 3}\n                style={{\n                  padding: '10px 20px',\n                  fontSize: '14px',\n                  cursor: (controlLocked || myLane === 3) ? 'not-allowed' : 'pointer',\n                  opacity: (controlLocked || myLane === 3) ? 0.5 : 1\n                }}\n              >\n                ‚û°Ô∏è Right Lane\n              </button>\n            </div>\n            <div style={{ marginTop: '10px', fontSize: '12px', color: '#666' }}>\n              Current Lane: {LANES[myLane]?.name || 'Unknown'}\n            </div>\n          </div>\n        )}\n\n        {isEmergencyVehicle && (\n          <div className=\"emergency-controls\">\n            <button\n              className={`emergency-button ${emergencyActive ? 'emergency-active' : ''}`}\n              onClick={emergencyActive ? clearEmergencySignal : sendEmergencySignal}\n              disabled={!isConnected}\n            >\n              {emergencyActive ? 'üõë Clear Emergency' : 'üö® Activate Emergency'}\n            </button>\n          </div>\n        )}\n\n        {connectionError && (\n          <div style={{ color: '#dc3545', fontSize: '12px', marginTop: '10px' }}>\n            {connectionError}\n          </div>\n        )}\n      </div>\n\n      {/* Highway Simulation */}\n      <div className=\"highway-container\">\n        <div className=\"highway\">\n          {/* Lane Dividers */}\n          {Object.entries(LANES).map(([laneNum, lane]) => (\n            <div\n              key={laneNum}\n              className=\"lane\"\n              style={{\n                width: `${100 / Object.keys(LANES).length}%`,\n                left: `${((laneNum - 1) / Object.keys(LANES).length) * 100}%`\n              }}\n            />\n          ))}\n\n          {/* Vehicles */}\n          {Object.entries(vehicles).map(([id, vehicle]) => (\n            <div\n              key={id}\n              className={`vehicle ${VEHICLE_TYPES[vehicle.vehicle_type]?.color || 'regular'} ${laneChanges[id] ? 'lane-changing' : ''}`}\n              style={getVehicleStyle(vehicle)}\n              title={`${VEHICLE_TYPES[vehicle.vehicle_type]?.name} (${id.substring(0, 8)})`}\n            >\n              {VEHICLE_TYPES[vehicle.vehicle_type]?.name.substring(0, 2)}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Loading/Error States */}\n      {!isConnected && !connectionError && (\n        <div className=\"loading\">\n          <div className=\"loading-spinner\" />\n          <div>Connecting to server...</div>\n        </div>\n      )}\n\n      {connectionError && (\n        <div className=\"error-message\">\n          <h3>Connection Error</h3>\n          <p>{connectionError}</p>\n          <button onClick={() => window.location.reload()} style={{ marginTop: '10px' }}>\n            Retry Connection\n          </button>\n        </div>\n      )}\n      </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}